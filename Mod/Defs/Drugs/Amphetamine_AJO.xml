<?xml version="1.0" encoding="utf-8" ?>
<Amphetamine>

  <ThingDef ParentName="MakeableDrugBase">
    <defName>Amphetamine</defName>
    <label>amphetamine</label>
    <description>An addictive stimulant. Amphetamine enhances cognitive performance, allowing users to work with great focus for extended periods of time, without getting tired. Addiction causes reduces mental performance and, sometimes, psychotic breaks with reality.</description>
    <graphicData>
      <texPath>Things/Item/Drug/Amphetamine</texPath>
      <graphicClass>Graphic_StackCount</graphicClass>
    </graphicData>
    <rotatable>false</rotatable>
    <statBases>
      <WorkToMake>1000</WorkToMake>
      <MarketValue>64</MarketValue>
    </statBases>
    <techLevel>Industrial</techLevel>
    <ingestible>
      <foodType>Processed</foodType>
      <nutrition>0</nutrition>
      <joy>0.4</joy>
      <ingestSound>Ingest_Pill</ingestSound>
      <ingestCommandString>Take {0}</ingestCommandString>
      <ingestReportString>Taking {0}.</ingestReportString>
      <hediffGivers>
        <li>
          <hediffDef>AmphetamineHigh</hediffDef>
          <severity>0.75</severity>
          <chemical>Amphetamine</chemical>
        </li>
        <li>
          <hediffDef>AmphetamineTolerance</hediffDef>
          <severity>0.023</severity>
        </li>
      </hediffGivers>
    </ingestible>
    <recipeMaker>
      <researchPrerequisite>AmphetamineProduction</researchPrerequisite>
      <recipeUsers>
        <li>DrugLab</li>
      </recipeUsers>
    </recipeMaker>
    <costList>
      <Neutroamine>4</Neutroamine>
    </costList>
    <comps>
      <li Class="CompProperties_Drug">
        <chemical>Amphetamine</chemical>
        <addictiveness>0.15</addictiveness>
        <addictionHediffSeverityOffset>0.1</addictionHediffSeverityOffset>
        <needLevelOffset>1</needLevelOffset>
        <overdoseSeverityOffset>
          <min>0.18</min>
          <max>0.35</max>
        </overdoseSeverityOffset>
      </li>
    </comps>
  </ThingDef>

  <HediffDef>
    <defName>AmphetamineHigh</defName>
    <hediffClass>HediffWithComps</hediffClass>
    <label>high on amphetamine</label>
    <defaultLabelColor>(1,0,0.5)</defaultLabelColor>
    <scenarioCanAdd>true</scenarioCanAdd>
    <maxSeverity>1.0</maxSeverity>
    <comps>
      <li>
        <compClass>HediffComp_SeverityPerDay</compClass>
        <severityPerDay>-1.5</severityPerDay>
      </li>
    </comps>
      <stages>
        <li>
          <restFallFactor>0.8</restFallFactor>
          <capMods>
            <li>
              <capacity>Consciousness</capacity>
              <offset>0.1</offset>
            </li>
            <li>
              <capacity>Moving</capacity>
              <offset>0.1</offset>
            </li>
          </capMods>
          <statOffsets>
            <WorkSpeedGlobal>0.5</WorkSpeedGlobal>
          </statOffsets>
          <hediffGivers>
            <li Class="HediffGiver_Random">
              <hediff>HeartAttack</hediff>
              <mtbDays>120</mtbDays>
            </li>
          </hediffGivers>
        </li>
      </stages>
  </HediffDef>
  
  <ResearchProjectDef>
    <defName>AmphetamineProduction</defName>
    <label>amphetamine production</label>
    <description>Your chemists learn the formulas and techniques for synthesizing amphetamine.</description>
    <baseCost>800</baseCost>
    <techLevel>Industrial</techLevel>
    <prerequisites>
      <li>DrugProduction</li>
    </prerequisites>
  </ResearchProjectDef>
  
  <!-- Amphetamine addiction -->
  
  <ChemicalDef>
    <defName>Amphetamine</defName>
    <label>amphetamine</label>
    <addictionHediff>AmphetamineAddiction</addictionHediff>
  </ChemicalDef>
  
  <NeedDef ParentName="DrugAddictionNeedBase">
    <defName>Chemical_Amphetamine</defName>
    <needClass>Need_Chemical</needClass>
    <label>amphetamine</label>
    <description>Because of an amphetamine addiction, this person needs to regularly consume the drug to avoid withdrawal symptoms.</description>
    <listPriority>40</listPriority>
  </NeedDef>

  <HediffDef ParentName="DrugToleranceBase">
    <defName>AmphetamineTolerance</defName>
    <label>amphetamine tolerance</label>
    <comps>
      <li>
        <compClass>HediffComp_SeverityPerDay</compClass>
        <severityPerDay>-0.04</severityPerDay>
      </li>
      <li>
        <compClass>HediffComp_DrugEffectFactor</compClass>
        <chemical>Amphetamine</chemical>
      </li>
    </comps>
  </HediffDef>
  
  <HediffDef ParentName="AddictionBase">
    <defName>AmphetamineAddiction</defName>
    <hediffClass>Hediff_Addiction</hediffClass>
    <label>amphetamine addiction</label>
    <causesNeed>Chemical_Amphetamine</causesNeed>
    <comps>
      <li>
        <compClass>HediffComp_SeverityPerDay</compClass>
        <severityPerDay>-0.05</severityPerDay>
      </li>
    </comps>
    <stages>
      <li>
      </li>
      <li>
        <label>withdrawal</label>
        <restFallFactor>1.2</restFallFactor>
        <capMods>
          <li>
            <capacity>Consciousness</capacity>
            <offset>-0.15</offset>
          </li>
          <li>
            <capacity>Manipulation</capacity>
            <offset>-0.1</offset>
          </li>
          <li>
            <capacity>Moving</capacity>
            <offset>-0.1</offset>
          </li>
        </capMods>
        <mentalStateGivers>
          <li>
            <mentalState>WanderPsychotic</mentalState>
            <mtbDays>6</mtbDays>
          </li>
        </mentalStateGivers>
      </li>
    </stages>
  </HediffDef>

  <ThoughtDef>
    <defName>AmphetamineWithdrawal</defName>
    <workerClass>ThoughtWorker_Hediff</workerClass>
    <hediff>AmphetamineAddiction</hediff>
    <stages>
      <li>
        <visible>false</visible>
      </li>
      <li>
        <label>amphetamine withdrawal</label>
        <description>I feel all fuzzy and unfocused.</description>
        <baseMoodEffect>-25</baseMoodEffect>
      </li>
    </stages>
  </ThoughtDef>
  
</Amphetamine>